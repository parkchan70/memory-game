<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìŒì•… ê¸°í˜¸ ë©”ëª¨ë¦¬ ê²Œì„</title>
    <style>
        body {
            font-family: sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #f0f8ff; /* ì—°í•œ í•˜ëŠ˜ìƒ‰ ë°°ê²½ */
            margin-top: 20px;
        }

        .container {
            display: grid;
            grid-template-columns: repeat(6, 80px);
            grid-gap: 10px;
            /* ê·¸ë¦¬ë“œ í¬ê¸°ê°€ ê³ ì •ë˜ì–´ ìˆì§€ë§Œ, ì¹´ë“œê°€ ì‚¬ë¼ì§€ë©´ì„œ ë ˆì´ì•„ì›ƒì´ ì•½ê°„ í‹€ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. */
            /* í•„ìš”í•˜ë‹¤ë©´ min-height ë“±ì„ ì„¤ì •í•˜ì—¬ ì»¨í…Œì´ë„ˆ ë†’ì´ë¥¼ ê³ ì •í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. */
        }

        .card {
            width: 80px;
            height: 100px;
            background-color: #a8dadc; /* íŒŒìŠ¤í…”í†¤ ë’·ë©´ ìƒ‰ìƒ 1 */
            border-radius: 8px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            cursor: pointer;
            perspective: 1000px;
            transition: transform 0.3s, opacity 0.5s ease-out; /* íˆ¬ëª…ë„ ë³€í™” ì• ë‹ˆë©”ì´ì…˜ ì¶”ê°€ */
        }

        .card-inner {
            width: 100%;
            height: 100%;
            position: relative;
            transition: transform 0.3s;
            transform-style: preserve-3d;
        }

        .card.flipped .card-inner {
            transform: rotateY(180deg);
        }

        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 8px;
        }

        .card-front {
            background-color: #457b9d; /* íŒŒìŠ¤í…”í†¤ ì•ë©´ ìƒ‰ìƒ (ìˆ«ì) */
            color: white;
            font-size: 30px;
        }

        .card-back {
            background-color: #1d3557; /* íŒŒìŠ¤í…”í†¤ ë’·ë©´ ìƒ‰ìƒ 2 (ê¸°í˜¸) */
            color: white;
            font-size: 40px;
            transform: rotateY(180deg);
        }

        /* ë§¤ì¹­ëœ ì¹´ë“œë¥¼ íˆ¬ëª…í•˜ê²Œ ë§Œë“¤ê³  í´ë¦­ ë¶ˆê°€ëŠ¥í•˜ê²Œ ì„¤ì • */
        .card.matched {
            opacity: 0; /* ì¹´ë“œê°€ ì‚¬ë¼ì§€ë„ë¡ íˆ¬ëª…ë„ ì„¤ì • */
            pointer-events: none; /* í´ë¦­ ì´ë²¤íŠ¸ ë¹„í™œì„±í™” */
        }

        h1 {
            color: #457b9d;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <h1>ìŒì•… ê¸°í˜¸ ì¹´ë“œ ë§ì¶”ê¸°</h1>
    <div class="container">
        </div>

    <audio id="flipSound" src="flip.mp3"></audio>
    <audio id="matchSound" src="ding.mp3"></audio> <audio id="mismatchSound" src="peong.mp3"></audio> <audio id="popSound" src="pop.mp3"></audio> <script>
        const container = document.querySelector('.container');
        const flipSound = document.getElementById('flipSound');
        const matchSound = document.getElementById('matchSound'); // ë ë¦¬ë§
        const mismatchSound = document.getElementById('mismatchSound'); // í‹€ë ¸ì„ ë•Œ
        const popSound = document.getElementById('popSound'); // ì‚¬ë¼ì§ˆ ë•Œ í‘ ì†Œë¦¬

        const symbols = ['ğŸµ', 'ğŸ¶', 'ğŸ¼', 'ğŸ¹', 'ğŸº', 'ğŸ»', 'ğŸ¥', 'ğŸ¸', 'ğŸ·', ' flute ', ' harp ', ' xylophone ']; // 12ê°œ
        let duplicatedSymbols = [...symbols, ...symbols]; // ì´ 24ê°œ ì¹´ë“œ
        let cardsArray = [];
        let flippedCards = [];
        let matchedCards = [];
        let lockBoard = false; // ì¹´ë“œë¥¼ ë’¤ì§‘ëŠ” ë™ì•ˆ ë‹¤ë¥¸ ì¹´ë“œ í´ë¦­ ë°©ì§€

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                const temp = array [i];
                array [i] = array [j];
                array [j] = temp;
            }
        }

        function createCard(symbol, index) {
            const card = document.createElement('div');
            card.classList.add('card');
            card.dataset.index = index; // ì¸ë±ìŠ¤ëŠ” ì¹´ë“œ ìœ„ì¹˜ì— ë”°ë¼ ë¶€ì—¬ (ë‚˜ì¤‘ì— í•„ìš” ì—†ì„ ìˆ˜ë„ ìˆìŒ)

            const cardInner = document.createElement('div');
            cardInner.classList.add('card-inner');

            const cardFront = document.createElement('div');
            cardFront.classList.add('card-front');
            cardFront.textContent = index + 1; // ì¹´ë“œ ì•ë©´ ë²ˆí˜¸

            const cardBack = document.createElement('div');
            cardBack.classList.add('card-back');
            cardBack.textContent = symbol; // ì¹´ë“œ ë’·ë©´ ê¸°í˜¸

            cardInner.appendChild(cardFront);
            cardInner.appendChild(cardBack);
            card.appendChild(cardInner);

            card.addEventListener('click', flipCard);
            return card;
        }

        function setupGame() {
            shuffleArray(duplicatedSymbols); // ê¸°í˜¸ ì„ê¸°
            container.innerHTML = ''; // ê²Œì„ ì¬ì‹œì‘ ì‹œ ê¸°ì¡´ ì¹´ë“œ ì œê±°
            cardsArray = []; // ì¹´ë“œ ë°°ì—´ ì´ˆê¸°í™”
            flippedCards = [];
            matchedCards = [];
            lockBoard = false;

            duplicatedSymbols.forEach((symbol, index) => {
                const card = createCard(symbol, index);
                cardsArray.push(card);
                container.appendChild(card);
            });
        }

        function playSound(audioElement) {
            audioElement.currentTime = 0; // ì‚¬ìš´ë“œë¥¼ ì²˜ìŒë¶€í„° ì¬ìƒ
            audioElement.play();
        }

        function flipCard() {
            // ë³´ë“œ ì ê¸ˆ ìƒíƒœì´ê±°ë‚˜, ì´ë¯¸ ë’¤ì§‘íŒ ì¹´ë“œì´ê±°ë‚˜, ì´ë¯¸ ë§ì¶°ì§„ ì¹´ë“œë©´ í´ë¦­ ë¬´ì‹œ
            if (lockBoard || this === flippedCards [0] || this.classList.contains('matched')) return;

            playSound(flipSound); // ì¹´ë“œ ë’¤ì§‘ëŠ” ì†Œë¦¬

            this.classList.add('flipped'); // ì¹´ë“œ ë’¤ì§‘ê¸°
            flippedCards.push(this); // ë’¤ì§‘íŒ ì¹´ë“œ ë°°ì—´ì— ì¶”ê°€

            if (flippedCards.length === 2) { // ë‘ ì¥ì˜ ì¹´ë“œê°€ ë’¤ì§‘í˜”ìœ¼ë©´
                checkForMatch(); // ì¼ì¹˜ ì—¬ë¶€ í™•ì¸
            }
        }

        function checkForMatch() {
            lockBoard = true; // ë³´ë“œ ì ê¸ˆ
            const [card1, card2] = flippedCards;
            const symbol1 = card1.querySelector('.card-back').textContent;
            const symbol2 = card2.querySelector('.card-back').textContent;

            if (symbol1 === symbol2) { // ë‘ ì¹´ë“œì˜ ê¸°í˜¸ê°€ ê°™ìœ¼ë©´
                matchCards(); // ë§ì¶¤ ì²˜ë¦¬
            } else { // ë‹¤ë¥´ë©´
                unflipCards(); // ë‹¤ì‹œ ë’¤ì§‘ê¸°
            }
        }

        function matchCards() {
            playSound(popSound); // í‘ ì†Œë¦¬ ì¬ìƒ

            flippedCards.forEach(card => {
                card.classList.add('matched'); // ë§¤ì¹­ëœ ì¹´ë“œ í´ë˜ìŠ¤ ì¶”ê°€ (ì‚¬ë¼ì§€ê²Œ í•¨)
            });
            matchedCards.push(...flippedCards); // ë§ì¶˜ ì¹´ë“œ ë°°ì—´ì— ì¶”ê°€

            resetBoard(); // ë³´ë“œ ìƒíƒœ ì´ˆê¸°í™”
        }

        function unflipCards() {
            playSound(mismatchSound); // í‹€ë ¸ì„ ë•Œ ì†Œë¦¬ ì¬ìƒ
            setTimeout(() => {
                flippedCards.forEach(card => card.classList.remove('flipped')); // ë‹¤ì‹œ ë’¤ì§‘ê¸°
                resetBoard(); // ë³´ë“œ ìƒíƒœ ì´ˆê¸°í™”
            }, 1000); // 1ì´ˆ í›„ ë’¤ì§‘ìŒ
        }

        function resetBoard() {
            flippedCards = []; // ë’¤ì§‘íŒ ì¹´ë“œ ë°°ì—´ ì´ˆê¸°í™”
            lockBoard = false; // ë³´ë“œ ì ê¸ˆ í•´ì œ

            // ëª¨ë“  ì¹´ë“œë¥¼ ë‹¤ ë§ì·„ëŠ”ì§€ í™•ì¸
            if (matchedCards.length === duplicatedSymbols.length) {
                setTimeout(() => {
                    alert('ğŸ‰ ëª¨ë‘ ë§ì¶”ì…¨ìŠµë‹ˆë‹¤! ë‹¤ì‹œ ì‹œì‘í•©ë‹ˆë‹¤! ğŸ‰');
                    resetGame(); // ê²Œì„ ì¬ì‹œì‘
                }, 500); // 0.5ì´ˆ í›„ ì•Œë¦¼ ë° ì¬ì‹œì‘
            }
        }

        function resetGame() {
            setupGame(); // ê²Œì„ ì´ˆê¸° ì„¤ì • ë‹¤ì‹œ ì‹¤í–‰
        }

        // ê²Œì„ ì‹œì‘
        setupGame();
    </script>
</body>
</html>
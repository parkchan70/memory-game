<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìŒì•… ê¸°í˜¸ ë©”ëª¨ë¦¬ ê²Œì„</title>
    <style>
        body {
            font-family: sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #f0f8ff; /* ì—°í•œ í•˜ëŠ˜ìƒ‰ ë°°ê²½ */
            margin-top: 20px;
        }

        .header {
            width: 100%;
            display: flex;
            justify-content: space-between; /* ì œëª©ê³¼ ë²„íŠ¼ì„ ì–‘ ëìœ¼ë¡œ ë°°ì¹˜ */
            align-items: center;
            max-width: 550px; /* ì»¨í…Œì´ë„ˆ ë„ˆë¹„ì™€ ìœ ì‚¬í•˜ê²Œ ì„¤ì • */
            margin-bottom: 20px;
            padding: 0 10px; /* ì¢Œìš° ì—¬ë°± */
        }

        h1 {
            color: #457b9d;
            margin: 0; /* ê¸°ë³¸ ë§ˆì§„ ì œê±° */
            font-size: 28px; /* ì œëª© í¬ê¸° ì¡°ì • */
        }

        .restart-button {
            padding: 10px 20px;
            font-size: 16px;
            background-color: #1d3557; /* ë²„íŠ¼ ë°°ê²½ìƒ‰ */
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }

        .restart-button:hover {
            background-color: #457b9d; /* í˜¸ë²„ ì‹œ ìƒ‰ìƒ ë³€ê²½ */
        }

        .container {
            display: grid;
            grid-template-columns: repeat(6, 80px);
            grid-gap: 10px;
            max-width: 550px; /* ì¹´ë“œ 6ê°œ * 80px + 5ê°œ * 10px = 480 + 50 = 530px */
            justify-content: center; /* ê·¸ë¦¬ë“œ ì¤‘ì•™ ì •ë ¬ */
        }

        .card {
            width: 80px;
            height: 100px;
            background-color: #a8dadc; /* íŒŒìŠ¤í…”í†¤ ë’·ë©´ ìƒ‰ìƒ 1 */
            border-radius: 8px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            cursor: pointer;
            perspective: 1000px;
            transition: transform 0.3s, opacity 0.5s ease-out; /* íˆ¬ëª…ë„ ë³€í™” ì• ë‹ˆë©”ì´ì…˜ ì¶”ê°€ */
        }

        .card-inner {
            width: 100%;
            height: 100%;
            position: relative;
            transition: transform 0.3s;
            transform-style: preserve-3d;
        }

        .card.flipped .card-inner {
            transform: rotateY(180deg);
        }

        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 8px;
        }

        .card-front {
            background-color: #457b9d; /* íŒŒìŠ¤í…”í†¤ ì•ë©´ ìƒ‰ìƒ (ìˆ«ì) */
            color: white;
            font-size: 30px;
        }

        .card-back {
            background-color: #1d3557; /* íŒŒìŠ¤í…”í†¤ ë’·ë©´ ìƒ‰ìƒ 2 (ê¸°í˜¸) */
            color: white;
            font-size: 40px;
            transform: rotateY(180deg);
        }

        /* ë§¤ì¹­ëœ ì¹´ë“œë¥¼ íˆ¬ëª…í•˜ê²Œ ë§Œë“¤ê³  í´ë¦­ ë¶ˆê°€ëŠ¥í•˜ê²Œ ì„¤ì • */
        .card.matched {
            opacity: 0; /* ì¹´ë“œê°€ ì‚¬ë¼ì§€ë„ë¡ íˆ¬ëª…ë„ ì„¤ì • */
            pointer-events: none; /* í´ë¦­ ì´ë²¤íŠ¸ ë¹„í™œì„±í™” */
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ìŒì•… ê¸°í˜¸ ì¹´ë“œ ë§ì¶”ê¸° ğŸµ</h1>
        <button class="restart-button" id="restartButton">ë‹¤ì‹œ ì‹œì‘</button>
    </div>

    <div class="container">
        </div>

    <audio id="flipSound" src="flip.mp3"></audio>
    <audio id="matchSound" src="ding.mp3"></audio> <audio id="mismatchSound" src="peong.mp3"></audio> <audio id="popSound" src="pop.mp3"></audio> <script>
        const container = document.querySelector('.container');
        const restartButton = document.getElementById('restartButton');
        const flipSound = document.getElementById('flipSound');
        const matchSound = document.getElementById('matchSound'); // ë ë¦¬ë§
        const mismatchSound = document.getElementById('mismatchSound'); // í‹€ë ¸ì„ ë•Œ
        const popSound = document.getElementById('popSound'); // ì‚¬ë¼ì§ˆ ë•Œ í‘ ì†Œë¦¬

        // ì´ë¯¸ì§€ì— ìˆëŠ” ìˆœìˆ˜í•œ ìŒì•… ê¸°í˜¸ë“¤ë§Œ ì‚¬ìš© (ì´ 12ê°€ì§€)
        const symbols = [
            'â™©', 'â™ª', 'â™¬', 'â™­', 'â™®', 'â™¯', 'ğ„', 'ğ„¢', 'ğ„«', 'ğ„ª', 'ğ†‘', 'ğ†'
            // ì°¸ê³ : 'p', 'f', ì‰¼í‘œ ê¸°í˜¸ ë“±ì€ ê¸€ì ë˜ëŠ” ë‹¤ë¥¸ ì¢…ë¥˜ì˜ ê¸°í˜¸ë¡œ ë¶„ë¥˜ë  ìˆ˜ ìˆì–´ ì œì™¸í–ˆìŠµë‹ˆë‹¤.
            // ë§Œì•½ 'p', 'f', ì‰¼í‘œë„ í¬í•¨í•˜ê³  ì‹¶ìœ¼ì‹œë©´ ì•„ë˜ ë°°ì—´ì— ì¶”ê°€í•˜ì‹œë©´ ë©ë‹ˆë‹¤.
            // ì˜ˆë¥¼ ë“¤ì–´: 'â™©', 'â™ª', 'â™¬', 'â™­', 'â™®', 'â™¯', 'ğ„', 'ğ„¢', 'ğ„«', 'ğ„ª', 'ğ†‘', 'ğ†', 'ğ†', 'ğ†‚', 'ğ†ƒ', 'ğ†„', 'ğ†…', 'ğ††', 'ğ†‡', 'ğ†ˆ' ë“± ë‹¤ì–‘í•œ ìŒì•… ê¸°í˜¸ê°€ ìˆìŠµë‹ˆë‹¤.
            // í˜„ì¬ ì´ë¯¸ì§€ì— ëª…í™•í•˜ê²Œ ë³´ì´ëŠ” ê¸°í˜¸ë§Œ í¬í•¨í–ˆìŠµë‹ˆë‹¤.
        ];

        let duplicatedSymbols = []; // symbols ë°°ì—´ì˜ ê° ìš”ì†Œë¥¼ ë‘ ë²ˆì”© í¬í•¨í•˜ì—¬ 24ê°œ ì¹´ë“œ ìƒì„±
        let cardsArray = []; // ìƒì„±ëœ ì¹´ë“œ DOM ìš”ì†Œë“¤ì„ ì €ì¥
        let flippedCards = []; // í˜„ì¬ ë’¤ì§‘íŒ ì¹´ë“œ 2ê°œë¥¼ ì €ì¥
        let matchedCards = []; // ë§ì¶°ì§„ ì¹´ë“œë“¤ì„ ì €ì¥
        let lockBoard = false; // ì¹´ë“œê°€ ë’¤ì§‘íˆëŠ” ë™ì•ˆ ì¶”ê°€ í´ë¦­ ë°©ì§€

        // ë°°ì—´ ìš”ì†Œë“¤ì„ ë¬´ì‘ìœ„ë¡œ ì„ëŠ” í•¨ìˆ˜ (Fisher-Yates ì…”í”Œ ì•Œê³ ë¦¬ì¦˜)
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]]; // ES6 ìŠ¤ì™‘ ë°©ì‹
            }
        }

        // ê°œë³„ ì¹´ë“œ DOM ìš”ì†Œë¥¼ ìƒì„±í•˜ëŠ” í•¨ìˆ˜
        function createCard(symbol, index) {
            const card = document.createElement('div');
            card.classList.add('card');
            card.dataset.symbol = symbol; // ì¹´ë“œì— ì–´ë–¤ ê¸°í˜¸ê°€ ìˆ¨ê²¨ì ¸ ìˆëŠ”ì§€ ë°ì´í„°ë¡œ ì €ì¥

            const cardInner = document.createElement('div');
            cardInner.classList.add('card-inner');

            const cardFront = document.createElement('div');
            cardFront.classList.add('card-front');
            cardFront.textContent = index + 1; // ì¹´ë“œ ì•ë©´ ë²ˆí˜¸

            const cardBack = document.createElement('div');
            cardBack.classList.add('card-back');
            cardBack.textContent = symbol; // ì¹´ë“œ ë’·ë©´ ê¸°í˜¸

            cardInner.appendChild(cardFront);
            cardInner.appendChild(cardBack);
            card.appendChild(cardInner);

            card.addEventListener('click', flipCard); // ì¹´ë“œ í´ë¦­ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
            return card;
        }

        // ê²Œì„ì„ ì´ˆê¸° ì„¤ì •í•˜ê³  ì‹œì‘í•˜ëŠ” í•¨ìˆ˜
        function setupGame() {
            // symbols ë°°ì—´ì˜ ê° ê¸°í˜¸ë¥¼ ë‘ ë²ˆì”© ë³µì‚¬í•˜ì—¬ 24ê°œ ì¹´ë“œ ë°ì´í„° ìƒì„±
            duplicatedSymbols = [...symbols, ...symbols];
            shuffleArray(duplicatedSymbols); // ê¸°í˜¸ ì„ê¸°

            container.innerHTML = ''; // ê¸°ì¡´ ì¹´ë“œ ëª¨ë‘ ì œê±° (ì¬ì‹œì‘ ì‹œ í•„ìš”)
            cardsArray = [];
            flippedCards = [];
            matchedCards = [];
            lockBoard = false;

            // ì„ì¸ ê¸°í˜¸ ë°°ì—´ì„ ë°”íƒ•ìœ¼ë¡œ ì¹´ë“œ ìƒì„± ë° DOMì— ì¶”ê°€
            duplicatedSymbols.forEach((symbol, index) => {
                const card = createCard(symbol, index);
                cardsArray.push(card);
                container.appendChild(card);
            });
        }

        // ì˜¤ë””ì˜¤ ì¬ìƒì„ ìœ„í•œ í—¬í¼ í•¨ìˆ˜
        function playSound(audioElement) {
            audioElement.currentTime = 0; // ì‚¬ìš´ë“œë¥¼ ì²˜ìŒë¶€í„° ì¬ìƒ
            audioElement.play();
        }

        // ì¹´ë“œë¥¼ ë’¤ì§‘ëŠ” í•¨ìˆ˜ (í´ë¦­ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬)
        function flipCard() {
            // ë³´ë“œ ì ê¸ˆ ìƒíƒœì´ê±°ë‚˜, ì´ë¯¸ ë’¤ì§‘íŒ ì¹´ë“œì´ê±°ë‚˜, ì´ë¯¸ ë§ì¶°ì§„ ì¹´ë“œë©´ í´ë¦­ ë¬´ì‹œ
            if (lockBoard || this === flippedCards[0] || this.classList.contains('matched')) return;

            playSound(flipSound); // ì¹´ë“œ ë’¤ì§‘ëŠ” ì†Œë¦¬ ì¬ìƒ

            this.classList.add('flipped'); // ì¹´ë“œ ë’¤ì§‘ê¸° ì• ë‹ˆë©”ì´ì…˜ ì ìš©
            flippedCards.push(this); // ë’¤ì§‘íŒ ì¹´ë“œ ë°°ì—´ì— ì¶”ê°€

            if (flippedCards.length === 2) { // ë‘ ì¥ì˜ ì¹´ë“œê°€ ë’¤ì§‘í˜”ìœ¼ë©´
                checkForMatch(); // ì¼ì¹˜ ì—¬ë¶€ í™•ì¸
            }
        }

        // ë’¤ì§‘íŒ ì¹´ë“œ ë‘ ì¥ì´ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸í•˜ëŠ” í•¨ìˆ˜
        function checkForMatch() {
            lockBoard = true; // ë³´ë“œ ì ê¸ˆ (ì¶”ê°€ í´ë¦­ ë°©ì§€)
            const [card1, card2] = flippedCards; // ë’¤ì§‘íŒ ë‘ ì¹´ë“œ ê°€ì ¸ì˜¤ê¸°
            const symbol1 = card1.dataset.symbol; // ì²« ë²ˆì§¸ ì¹´ë“œì˜ ê¸°í˜¸
            const symbol2 = card2.dataset.symbol; // ë‘ ë²ˆì§¸ ì¹´ë“œì˜ ê¸°í˜¸

            if (symbol1 === symbol2) { // ë‘ ì¹´ë“œì˜ ê¸°í˜¸ê°€ ê°™ìœ¼ë©´
                matchCards(); // ë§ì¶¤ ì²˜ë¦¬
            } else { // ë‹¤ë¥´ë©´
                unflipCards(); // ë‹¤ì‹œ ë’¤ì§‘ê¸°
            }
        }

        // ì¹´ë“œê°€ ì¼ì¹˜í–ˆì„ ë•Œ ì²˜ë¦¬í•˜ëŠ” í•¨ìˆ˜ (ì‚¬ë¼ì§€ê²Œ í•¨)
        function matchCards() {
            playSound(popSound); // í‘ ì†Œë¦¬ ì¬ìƒ

            // ë’¤ì§‘íŒ ë‘ ì¹´ë“œë¥¼ 'matched' ìƒíƒœë¡œ ë§Œë“¤ê³  ì• ë‹ˆë©”ì´ì…˜ í›„ ì‚¬ë¼ì§€ê²Œ í•¨
            flippedCards.forEach(card => {
                card.classList.add('matched'); // CSS opacity 0, pointer-events none ì ìš©
            });

            matchedCards.push(...flippedCards); // ë§ì¶˜ ì¹´ë“œ ë°°ì—´ì— ì¶”ê°€

            resetBoard(); // ë³´ë“œ ìƒíƒœ ì´ˆê¸°í™” (ë’¤ì§‘íŒ ì¹´ë“œ ë°°ì—´ ì´ˆê¸°í™”, ì ê¸ˆ í•´ì œ)
        }

        // ì¹´ë“œê°€ ì¼ì¹˜í•˜ì§€ ì•Šì•˜ì„ ë•Œ ì²˜ë¦¬í•˜ëŠ” í•¨ìˆ˜ (ë‹¤ì‹œ ë’¤ì§‘ê¸°)
        function unflipCards() {
            playSound(mismatchSound); // í‹€ë ¸ì„ ë•Œ ì†Œë¦¬ ì¬ìƒ
            setTimeout(() => {
                flippedCards.forEach(card => card.classList.remove('flipped')); // ë‹¤ì‹œ ë’¤ì§‘ê¸° ì• ë‹ˆë©”ì´ì…˜ ì œê±°
                resetBoard(); // ë³´ë“œ ìƒíƒœ ì´ˆê¸°í™”
            }, 1000); // 1ì´ˆ(1000ms) í›„ ë‹¤ì‹œ ë’¤ì§‘ìŒ
        }

        // ë³´ë“œ ìƒíƒœë¥¼ ì´ˆê¸°í™”í•˜ëŠ” í•¨ìˆ˜
        function resetBoard() {
            flippedCards = []; // ë’¤ì§‘íŒ ì¹´ë“œ ë°°ì—´ ì´ˆê¸°í™”
            lockBoard = false; // ë³´ë“œ ì ê¸ˆ í•´ì œ

            // ëª¨ë“  ì¹´ë“œë¥¼ ë‹¤ ë§ì·„ëŠ”ì§€ í™•ì¸
            if (matchedCards.length === duplicatedSymbols.length) {
                setTimeout(() => {
                    alert('ğŸ‰ ëª¨ë‘ ë§ì¶”ì…¨ìŠµë‹ˆë‹¤! ğŸ‰'); // ê²Œì„ ì™„ë£Œ ë©”ì‹œì§€
                    // ì„ íƒì ìœ¼ë¡œ ê²Œì„ ì™„ë£Œ í›„ ìë™ìœ¼ë¡œ ì¬ì‹œì‘í•˜ë ¤ë©´ resetGame() í˜¸ì¶œ
                    // resetGame();
                }, 500); // 0.5ì´ˆ í›„ ì•Œë¦¼
            }
        }

        // ê²Œì„ì„ ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì‹œì‘í•˜ëŠ” í•¨ìˆ˜
        function resetGame() {
            setupGame(); // ê²Œì„ ì´ˆê¸° ì„¤ì • ë‹¤ì‹œ ì‹¤í–‰
        }

        // "ë‹¤ì‹œ ì‹œì‘" ë²„íŠ¼ì— í´ë¦­ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
        restartButton.addEventListener('click', resetGame);

        // ê²Œì„ ì‹œì‘ (í˜ì´ì§€ ë¡œë“œ ì‹œ)
        setupGame();
    </script>
</body>
</html>